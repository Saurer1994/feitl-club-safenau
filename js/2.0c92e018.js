(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"713b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("q-stepper",{staticStyle:{height:"100%"},attrs:{vertical:"",color:"primary",animated:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{attrs:{name:1,title:"Lade den Whatsapp Verlauf hier hoch",icon:"settings",done:e.step>1}},[a("q-uploader",{staticStyle:{"max-width":"300px"},on:{added:e.receiveFile}}),a("q-stepper-navigation",[a("q-btn",{attrs:{color:"primary",disable:!e.allMessagesFormatted.length,label:"Weiter"},on:{click:function(t){e.step=2}}})],1)],1),a("q-step",{attrs:{name:2,title:"Datei exportieren",icon:"create_new_folder",done:e.step>2}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n          Hier werden die Datensätze zur Kontrolle angezeigt. Sollten Personen nicht identifizierbar sein, kannst du diese anpassen.\n          Es sind "+e._s(e.countNotKnown)+" Personen nicht identifizierbar.\n        ")]),a("q-table",{staticStyle:{"max-width":"900px"},attrs:{data:e.allMessagesFormatted,columns:e.columns,"rows-per-page-options":[7,10]},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"date",attrs:{props:t}},[e._v("\n                "+e._s(t.row.date)+"\n              ")]),a("q-td",{key:"name",style:"NICHT IDENTIFIZIERBAR"===t.row.name?"background-color: orangered":"",attrs:{props:t}},[a("q-input",{attrs:{dense:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}})],1),a("q-td",{key:"message",attrs:{props:t}},[e._v("\n                "+e._s(t.row.message)+"\n              ")]),a("q-td",{key:"message",attrs:{props:t}},[a("q-btn",{staticClass:"glossy",attrs:{round:"",color:"red",icon:"delete"},on:{click:function(a){return e.deleteRow(t)}}})],1),a("q-td",[a("q-btn",{staticClass:"glossy",attrs:{color:"green",label:"Auf 2 Teilen"},on:{click:function(a){return e.makeTwoRows(t)}}})],1)],1)]}}])}),a("q-stepper-navigation",[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("q-btn",{staticStyle:{"margin-bottom":"10px","max-width":"300px"},attrs:{color:"primary",disable:!!e.allMessagesFormatted.find((function(e){return"NICHT IDENTIFIZIERBAR"===e.name})),label:"Download"},on:{click:e.finishSteps}}),a("q-btn",{staticStyle:{"max-width":"300px"},attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(t){e.step=1}}})],1)])],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Your address")])]),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Add address"}})],1)],1)],1)],1)},s=[],o=a("a6f4"),l=a("a357"),i=Object(o["b"])({name:"MainLayout",setup(){const e=Object(o["c"])(1),t=Object(o["c"])(),a=Object(o["c"])([]),n=Object(o["c"])(0),s=e=>{n.value=0;const t=e.toUpperCase(),s=t.split("\r\n");for(const o of s)if(o.includes("€")||o.includes("SELBSTANZEIGE")||o.includes("EURO")||o.includes("EUR")){const e=o.substring(1,19),t=o.split("]")[1].substring(o.split("]")[1].indexOf(":")+2),s=t.split(" "),l=[];if(3===s.length){for(const e of s)e.includes("€")||Number(e)||l.push(e);2==l.length?a.value.push({date:e,name:l[0]+" "+l[1],message:t}):(n.value=n.value+1,a.value.push({date:e,name:"NICHT IDENTIFIZIERBAR",message:t}))}else n.value=n.value+1,a.value.push({date:e,name:"NICHT IDENTIFIZIERBAR",message:t})}},i=e=>{const t=new FileReader;t.onload=function(){t.result&&s(t.result.toString())},t.readAsText(e[0])},r=e=>{a.value=[];const t=new FileReader;t.onload=function(){if(t.result){const e=t.result.toString().toUpperCase(),n=e.split("\n");n.shift();for(const t of n){const e=t.split(",");a.value.push({date:e[0]+""+e[1],name:e[2],message:e[3]})}}},t.readAsText(e[0])},c=[{name:"date",label:"Datum",field:"date",align:"left"},{name:"name",align:"left",label:"Name",field:"name",style:"width: 100%"},{name:"message",align:"left",label:"Nachricht",field:"message",style:"width: 200px"}],p=e=>{const t=[];t.push({0:"name",1:"amount"});for(const a of e){a.name=a.name.toUpperCase();const e=a.name.split(" ").sort(),n=e.join(" "),s=t.find((e=>e.name===n));(null===s||void 0===s?void 0:s.amount)?s.amount=s.amount+2:t.push({name:a.name,amount:2})}return t.map((e=>Object.values(e).toString())).join("\n")},d=()=>{Object(l["a"])("table-export.csv",p(a.value),"text/csv"),e.value=3},u=e=>{const t=JSON.parse(JSON.stringify(e));t.rowIndex>-1&&a.value.splice(t.rowIndex,1)},m=()=>{e.value=3,d()},f=e=>{const t=JSON.parse(JSON.stringify(e));a.value.splice(Number(t.rowIndex),0,t.row)};return{makeTwoRows:f,finishSteps:m,deleteRow:u,receiveNewFile:r,exportTable:d,openDialog:t,countNotKnown:n,columns:c,allMessagesFormatted:a,step:e,receiveFile:i}}}),r=i,c=a("2877"),p=a("f531"),d=a("87fe"),u=a("ee89"),m=a("b19c"),f=a("9c40"),b=a("eaac"),g=a("bd08"),v=a("db86"),w=a("27f9"),h=a("24e8"),x=a("f09f"),y=a("a370"),S=a("4b7e"),q=a("7f67"),I=a("eebe"),N=a.n(I),k=Object(c["a"])(r,n,s,!1,null,null,null);t["default"]=k.exports;N()(k,"components",{QStepper:p["a"],QStep:d["a"],QUploader:u["a"],QStepperNavigation:m["a"],QBtn:f["a"],QTable:b["a"],QTr:g["a"],QTd:v["a"],QInput:w["a"],QDialog:h["a"],QCard:x["a"],QCardSection:y["a"],QCardActions:S["a"]}),N()(k,"directives",{ClosePopup:q["a"]})}}]);